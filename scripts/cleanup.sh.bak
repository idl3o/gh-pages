#!/bin/bash
# Cleanup script to consolidate redundant files and organize the project

# Create backup of current state
echo "Creating backup of current state..."
mkdir -p ./backups/$(date +%Y%m%d)
cp package.json ./backups/$(date +%Y%m%d)/
cp -r ./_config.yml ./backups/$(date +%Y%m%d)/

# Consolidate duplicate configuration files
echo "Consolidating configuration files..."

# Remove backup duplicates if the original exists
find . -name "*backup*" -o -name "* 2.*" -o -name "*(1)*" | while read file; do
  base_file=$(echo "$file" | sed 's/ 2\././;s/ (1)//;s/\.backup$//')
  if [ -f "$base_file" ]; then
    echo "Removing duplicate: $file (original: $base_file exists)"
    rm "$file"
  fi
done
